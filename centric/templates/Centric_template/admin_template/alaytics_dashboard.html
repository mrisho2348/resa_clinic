{% extends 'Centric_template/admin_template/base_template.html' %}
{% block title %}
RESA 
{% endblock title %}
{% block main_content %}
<section class="content">
    <style>
        .panel-flat>.panel-heading>.panel-title {
            margin-top: 2px;
            margin-bottom: 2px;
        }
        
        h6.panel-title, .h6.panel-title {
            font-size: 15px;
        }
        .panel-title {
            position: relative;
            font-size: 13px;
        }
        .row {
            margin-left: -10px;
            margin-right: -10px;
        }
        .panel {
            margin-bottom: 20px;
            border-color: #ddd;
            color: #333;
        }
        .panel-heading {
            position: relative;
            border-top-right-radius: 3px;
            border-top-left-radius: 3px;
        }
        h6.panel-title, .h6.panel-title {
            font-size: 15px;
        }
        .panel-title>a, .panel-title>small, .panel-title>.small, .panel-title>small>a, .panel-title>.small>a {
            color: inherit;
        }

        .heading-elements-toggle>i, .breadcrumb-elements-toggle>i {
            top: 0;
        }
        
        [class^="icon-"], [class*=" icon-"] {
            font-family: 'icomoon';
            speak: none;
            font-style: normal;
            font-weight: normal;
            font-variant: normal;
            text-transform: none;
            line-height: 1;
            min-width: 1em;
            display: inline-block;
            text-align: center;
            font-size: 16px;
            vertical-align: middle;
            position: relative;
            top: -1px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .heading-elements {
            background-color: inherit;
            position: absolute;
            top: 50%;
            right: 20px;
            height: 36px;
            margin-top: -18px;
        }
        .icons-list {
            margin: 0;
            padding: 0;
            list-style: none;
            line-height: 1;
            font-size: 0;
        }
    </style>
    <div class="container-fluid">
        <!-- First Row -->
        <div class="row">
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-revenue">
                    <div class="inner">
                        <h3>162,000</h3>
                        <p>REVENUE</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-chart-line"></i> <!-- Corresponding Font Awesome icon for revenue -->
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3>162,000</h3>
                        <p>PAYMENT RECEIVED</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-dollar-sign"></i> <!-- Corresponding Font Awesome icon for expenses -->
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-profit">
                    <div class="inner">
                        <h3>1125</h3>
                        <p>PENDING INVOICES</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-hand-holding-usd"></i> <!-- Corresponding Font Awesome icon for gross profit -->
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-customer">
                    <div class="inner">
                        <h3>5</h3>
                        <p>TAX AMOUNT</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-users"></i> <!-- Corresponding Font Awesome icon for customers -->
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-revenue">
                    <div class="inner">
                        <h3>31</h3>
                        <p>USERS</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-chart-line"></i> <!-- Corresponding Font Awesome icon for revenue -->
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3>55</h3>
                        <p>TOTAL SALES</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-dollar-sign"></i> <!-- Corresponding Font Awesome icon for expenses -->
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-profit">
                    <div class="inner">
                        <h3>89</h3>
                        <p>PRODUCTS</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-hand-holding-usd"></i> <!-- Corresponding Font Awesome icon for gross profit -->
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <!-- small box -->
                <div class="small-box bg-customer">
                    <div class="inner">
                        <h3>66</h3>
                        <p>CUSTOMERS</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-users"></i> <!-- Corresponding Font Awesome icon for customers -->
                    </div>
                </div>
            </div>
        </div>
        
 
     <!-- Dashboard content -->
     <div class="row">
        <div class="col-lg-12">
    
            <!-- Marketing campaigns -->
            <div class="panel panel-flat">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="panel-title">Marketing campaigns</h6>
                        </div>
                        <div class="col-md-6 text-right">
                            <div class="heading-elements">
                                <ul class="icons-list">
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-menu7"></i> <span class="caret"></span></a>
                                        <ul class="dropdown-menu dropdown-menu-right">
                                            <li><a href="#"><i class="icon-sync"></i> Update data</a></li>
                                            <li><a href="#"><i class="icon-list-unordered"></i> Detailed log</a></li>
                                            <li><a href="#"><i class="icon-pie5"></i> Statistics</a></li>
                                            <li class="divider"></li>
                                            <li><a href="#"><i class="icon-cross3"></i> Clear list</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="table-responsive">
                    <table class="table text-nowrap">
                        <thead>
                            <tr>
                                <th>BUSINESS NAME</th>
                                <th class="col-md-2">PENDING SALES</th>
                                <th class="col-md-2">COMPLETED SALES</th>
                                <th class="col-md-2">PAYMENTS RECEIVED</th>
                            </tr>
                        </thead>
                        <tbody id="SalesSummary"></tbody>
                    </table>
                </div>
            </div>
            <!-- /marketing campaigns -->
        </div>
    </div>
    
<!-- /dashboard content -->

    </div>

             

       

   
    
  

    


</section>
{% endblock main_content %}

{% block customer_js %}


    
 
   
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="/js/site.min.js?v=q60E7f9_3wr490PkH0Gj8sRHNgRB-pcmH4WS2AE3aWo" type="text/javascript"></script>

    
<script type="text/javascript" src="/assets/js/plugins/forms/selects/select2.min.js"></script>
<script src="/assets/js/plugins/visualization/d3/d3.min.js"></script>
<script src="/assets/js/plugins/visualization/d3/d3_tooltip.js"></script>
<script src="/js/general_widgets_stats.js"></script>
<script>
    $(function () {

        //define the constants
        var url = "https://books.centrik.co.tz/api/";
        var accessToken = "eyJhbGciOiJSUzI1NiIsImtpZCI6ImNQWXlJSDByMkRiM0M0ZDlFd1VPLUEiLCJ0eXAiOiJhdCtqd3QifQ.eyJuYmYiOjE3MDQzMDA4MDYsImV4cCI6MTcwNDM4NzIwNiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmV4dHJhdGVxLmNvLnR6IiwiYXVkIjoiYXBpLnZpc3VhbGNybS5jby50eiIsImNsaWVudF9pZCI6InZpc3VhbF9jcm1fd2ViIiwic3ViIjoiMzZiMzMxZGItYTQ3ZC00ZDU2LTk4NTEtZWEzZTRhMzMzYWQ0IiwiYXV0aF90aW1lIjoxNzA0MzAwNzk1LCJpZHAiOiJsb2NhbCIsIlRlbmFudCI6ImNhYjdkNGFjLTE4MWMtNDFhMC1iNzkxLWNiY2RkZWYwNTU4ZCIsIkJyYW5jaCI6IjY2ZGUwOWNkLWRiOTEtNGQ2Ny1hZmJlLTQ5ZjNjNmI1YTY3OSIsIkNvbXBhbnkiOiJSRVNBIE1FRElDQUwgR1JPVVAiLCJyb2xlIjpbIlZpc3VhbEFwcCIsIlZpc3VhbEFwcC5Pd25lciIsIlZpc3VhbEFwcC5BZG1pbmlzdHJhdG9yIl0sInNjb3BlIjpbInJvbGVzIiwib3BlbmlkIiwicHJvZmlsZSIsImVtYWlsIiwiaXNfYWNjb3VudF9hY3RpdmUiLCJUZW5hbnQiLCJCcmFuY2giLCJDb21wYW55IiwiYXBpLnZpc3VhbGNybS5jby50eiIsIm9mZmxpbmVfYWNjZXNzIl0sImFtciI6WyJwd2QiXX0.pyKQycWAhlMLxba7B-OK2flWEoXhggw6RUQBo04G3SLGEzVtiEV3rivRizmIjnCWAxJ90uw65KnH81fO8VhqSesNFfERf4wP50I4C0xoZGAcKfdK7GIS-8IHcKmsoc4Hxh1YAxMR_QfNwePyTvqBC6pHYqkXds5TPJcwPHE9UFy-SekwzyWUXf2o5MlOkNo3Qw1MGOeROu4j4mPDUZhwCzZc09p8k-wRcTyGA-qZpIqOMrkJmSGccvrMDBJmZXlTbfAFp6q2U_Hndlk-MHVil5H4HerHHOxHMMwuqTtHQEpPCT19BiH3fVCJJOGTlO-brFKQrRSBYlAXoOzrUdIJig";
        var currency = "Tsh";

        let timerInterval;
        Swal.fire({
            title: 'Saving!',
            html: 'Please wait completing action',
            timer: 0,
            timerProgressBar: true,
            onBeforeOpen: () => {
                Swal.showLoading();


              $.ajax({
                    type: "GET",
                    accepts: "application/json",
                    contentType: "application/json",
                    url: url+"Analytics",
                    headers: {'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsImtpZCI6ImNQWXlJSDByMkRiM0M0ZDlFd1VPLUEiLCJ0eXAiOiJhdCtqd3QifQ.eyJuYmYiOjE3MDQzMDA4MDYsImV4cCI6MTcwNDM4NzIwNiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmV4dHJhdGVxLmNvLnR6IiwiYXVkIjoiYXBpLnZpc3VhbGNybS5jby50eiIsImNsaWVudF9pZCI6InZpc3VhbF9jcm1fd2ViIiwic3ViIjoiMzZiMzMxZGItYTQ3ZC00ZDU2LTk4NTEtZWEzZTRhMzMzYWQ0IiwiYXV0aF90aW1lIjoxNzA0MzAwNzk1LCJpZHAiOiJsb2NhbCIsIlRlbmFudCI6ImNhYjdkNGFjLTE4MWMtNDFhMC1iNzkxLWNiY2RkZWYwNTU4ZCIsIkJyYW5jaCI6IjY2ZGUwOWNkLWRiOTEtNGQ2Ny1hZmJlLTQ5ZjNjNmI1YTY3OSIsIkNvbXBhbnkiOiJSRVNBIE1FRElDQUwgR1JPVVAiLCJyb2xlIjpbIlZpc3VhbEFwcCIsIlZpc3VhbEFwcC5Pd25lciIsIlZpc3VhbEFwcC5BZG1pbmlzdHJhdG9yIl0sInNjb3BlIjpbInJvbGVzIiwib3BlbmlkIiwicHJvZmlsZSIsImVtYWlsIiwiaXNfYWNjb3VudF9hY3RpdmUiLCJUZW5hbnQiLCJCcmFuY2giLCJDb21wYW55IiwiYXBpLnZpc3VhbGNybS5jby50eiIsIm9mZmxpbmVfYWNjZXNzIl0sImFtciI6WyJwd2QiXX0.pyKQycWAhlMLxba7B-OK2flWEoXhggw6RUQBo04G3SLGEzVtiEV3rivRizmIjnCWAxJ90uw65KnH81fO8VhqSesNFfERf4wP50I4C0xoZGAcKfdK7GIS-8IHcKmsoc4Hxh1YAxMR_QfNwePyTvqBC6pHYqkXds5TPJcwPHE9UFy-SekwzyWUXf2o5MlOkNo3Qw1MGOeROu4j4mPDUZhwCzZc09p8k-wRcTyGA-qZpIqOMrkJmSGccvrMDBJmZXlTbfAFp6q2U_Hndlk-MHVil5H4HerHHOxHMMwuqTtHQEpPCT19BiH3fVCJJOGTlO-brFKQrRSBYlAXoOzrUdIJig'},
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log(jqXHR);
                        console.log(textStatus);
                        console.log(errorThrown);
                    },
                    success: function (rs)
                    {
                        //get the result sets
                        Swal.close();

                        console.log(rs);

                        //load data into stats
                        $("#TotalSale").html(rs.saleCount);
                        $("#UsersCount").html(rs.usersCount);
                        $("#CustomerCount").html(rs.customerCount);

                        $("#Revenue").html(addCommas(rs.revenue));
                        $("#PaymentReceived").html(addCommas(rs.paymentAmount));

                        //pending payments
                        $("#PendingRevenue").html(addCommas(rs.pending));
                        $("#TaxAmount").html(addCommas(rs.tax));

                        $("#ProductCount").html(rs.productCount);

                        var table = "";
                        var z = 1;
                        $.each(rs.stores, function (k, v) {

                            table += '<tr>';
                            table += '<td>';
                            table += '<div class="media-left media-middle">';
                            table += '<a href="#" class="btn bg-primary-400 btn-rounded btn-icon btn-xs">';
                            table += '<span class="letter-icon">' + z + '</span>';
                            table += '</a>';
                            table += '</div>';

                            table += '<div class="media-body">';
                            table += '<div class="media-heading">';
                            table += '<a href="#" class="letter-icon-title">'+v.store+'</a>';
                            table += '</div>';

                            table += '<div class="text-muted text-size-small"><i class="icon-checkmark3 text-size-mini position-left"></i>'+v.person+'</div>';
                            table += '</div>';
                            table += '</td>';
                            table += '<td><h6 class="text-semibold no-margin">' + addCommas(v.pending) + '</h6></td>';
                            table += '<td><h6 class="text-semibold no-margin">' + addCommas(v.completed) + '</h6></td>';
                            table += '<td><h6 class="text-semibold no-margin">' + addCommas(v.payment) + '</h6></td>';

                            table += '</tr>';

                            z++;
                        });

                        $("#SalesSummary").html(table);
                    }
                });

            },
            onClose: () => {
                clearInterval(timerInterval)
            }
             }).then((result) => {
            if (result.dismiss === Swal.DismissReason.timer) {
                console.log('I was closed by the timer') // eslint-disable-line
            }
        });


        function addCommas(nStr) {
            nStr += '';
            x = nStr.split('.');
            x1 = x[0];
            x2 = x.length > 1 ? '.' + x[1] : '';
            var rgx = /(\d+)(\d{3})/;
            while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + ',' + '$2');
            }
            return x1 + x2;
        }

    });
</script>






{% endblock customer_js %}